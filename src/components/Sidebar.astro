---
import { fetchTags, fetchSettings } from "../lib/wp";
const tags = await fetchTags(20);
const settings = await fetchSettings();
---
<section class="cat_block">
  <div class="little_card_title">Search</div>
  <form class="search" method="get" action="/search" role="search">
    <input type="text" id="s" name="s" class="text" placeholder="输入关键字回车" />
  </form>
</section>

<section class="cat_block">
  <div class="little_card_title">Tags</div>
  <div class="cat_categorymenu">
    {tags.map((t) => (
      <a href={`/tag/${t.slug}/`}>{t.name}<span style="font-size: x-small; color: var(--B);">{t.count}</span></a>
    ))}
  </div>
</section>

<section id="recent-comments" class="recent_comments" data-wp-url={import.meta.env.PUBLIC_WP_URL?.replace(/\/$/, '')}>
  <div class="cat_block" data-role="recent-loading" style="text-align:center; padding: 1rem; color: var(--B);">最新评论加载中...</div>
  <div class="cat_block aside_info_card">
    <div class="little_card_title">Info</div>
    <p set:html={settings.site_footer_text || 'Powered by Sunny Lite!'}></p>
  </div>
</section>
